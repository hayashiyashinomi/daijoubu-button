<div class="min-h-screen flex items-center justify-center">
  <div class="w-full max-w-xl mx-auto px-4 text-center">
    <h1 class="text-4xl font-bold tracking-tight mb-6">大丈夫ボタン</h1>

    <!-- メッセージ：高さ固定でズレ防止。ダークで白になる -->
    <p id="message"
       class="text-2xl font-semibold mb-8 text-gray-900 dark:text-white"
       style="min-height:3rem;">
      ボタンを押すと「大丈夫」が表示されます
    </p>

    <div class="flex items-center justify-center gap-4">
      <button id="ok-button"
              class="w-48 px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg shadow">
        大丈夫ボタンを押す
      </button>

      <button id="copy-button"
              class="w-32 px-4 py-2 bg-gray-700 hover:bg-gray-800 text-white rounded-md">
        コピー
      </button>
    </div>

    <!-- トースト：初期は必ず非表示（inline styleで保険） -->
    <div id="toast"
         class="fixed left-1/2 -translate-x-1/2 bottom-6 px-4 py-2 rounded-md text-white bg-gray-800/90"
         style="display:none;">
      コピーしました！
    </div>
  </div>
</div>

<script>
document.addEventListener('turbo:load', () => {
  const messages = [
    "大丈夫","Everything will be okay","Está todo bien","Ça va aller",
    "괜찮아","Все будет хорошо","Tudo bem","จะไม่เป็นไร","Tudo vai dar certo"
  ];

  const msg   = document.getElementById('message');
  const okBtn = document.getElementById('ok-button');
  const cpBtn = document.getElementById('copy-button');
  const toast = document.getElementById('toast');

  // メッセージの左右ブレ防止
  msg.style.whiteSpace = 'nowrap';
  msg.style.display = 'inline-block';

  okBtn?.addEventListener('click', () => {
    const random = messages[Math.floor(Math.random() * messages.length)];
    msg.textContent = random;
  });

  // 連打しても安定するトースト表示
  let timer = null;
  cpBtn?.addEventListener('click', async () => {
    try {
      await navigator.clipboard.writeText(msg.textContent);
      toast.style.display = 'block';
      if (timer) clearTimeout(timer);
      timer = setTimeout(() => { toast.style.display = 'none'; }, 1200);
    } catch {
      alert("コピーに失敗しました");
    }
  });
});
</script>
