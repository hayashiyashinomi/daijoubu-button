<div class="min-h-screen flex items-center justify-center px-4">
  <div class="w-full max-w-md text-center">
    <!-- タイトル（中央固定） -->
    <h1 class="text-4xl font-bold tracking-tight mb-6">大丈夫ボタン</h1>

    <!-- メッセージ領域：高さ固定で“ぬるっ”とズレない -->
    <p id="message"
       class="text-2xl font-semibold mb-8 text-gray-900 dark:text-white"
       style="min-height: 2.5rem;">
      ボタンを押すと「大丈夫」が表示されます
    </p>

    <!-- ボタン縦並び（幅固定でブレ防止） -->
    <div class="flex flex-col items-center gap-3">
      <button id="ok-button"
              class="w-60 px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg shadow">
        押す
      </button>

      <button id="copy-button"
              class="w-60 px-4 py-2 bg-gray-700 hover:bg-gray-800 text-white rounded-md">
        コピー
      </button>
    </div>

    <!-- トースト（初期は非表示） -->
    <div id="toast"
         class="mt-4 hidden text-sm"
         role="status" aria-live="polite"></div>
  </div>
</div>

<script>
document.addEventListener('turbo:load', () => {
  const messages = [
    "大丈夫","Everything will be okay","Está todo bien","Ça va aller",
    "괜찮아","Все будет хорошо","Tudo bem","จะไม่เป็นไร","Tudo vai dar certo"
  ];

  const msg     = document.getElementById('message');
  const okBtn   = document.getElementById('ok-button');
  const copyBtn = document.getElementById('copy-button');
  const toast   = document.getElementById('toast');

  // 中央配置のまま、テキストだけ入れ替え
  okBtn.addEventListener('click', () => {
    const random = messages[Math.floor(Math.random() * messages.length)];
    msg.textContent = random;
  });

  // 連打に強いコピー（タイマーを都度クリア）
  let toastTimer = null;
  copyBtn.addEventListener('click', async () => {
    try {
      await navigator.clipboard.writeText(msg.textContent);
      toast.textContent = "コピーしました！";
      toast.classList.remove('hidden');
      if (toastTimer) clearTimeout(toastTimer);
      toastTimer = setTimeout(() => {
        toast.classList.add('hidden');
        toast.textContent = "";
      }, 1200);
    } catch {
      toast.textContent = "コピーに失敗しました";
      toast.classList.remove('hidden');
      if (toastTimer) clearTimeout(toastTimer);
      toastTimer = setTimeout(() => {
        toast.classList.add('hidden');
        toast.textContent = "";
      }, 1200);
    }
  });
});
</script>
